# 🧐 필수 요구사항 체크리스트

- [x] 이벤트 달은 12월이지만 바꿀 수 있어야 한다.

- [x] 평일은 일요일부터 목요일, 주말은 금요일과 토요일이다.

- [x] 총주문 금액이 10000원 이상이어야 이벤트가 적용된다.

- [x] 음료만 주문 시, 주문할 수 없다.

- [x] 메뉴는 한 번에 최대 20개까지 주문 가능하다.

- [x] 크리스마스 디데이 할인은 12월 25일까지만 적용된다.

---

# 📝 구현할 기능 목록

| **입력**                                               | 구현 사항                                                                              |
|------------------------------------------------------|------------------------------------------------------------------------------------|
| <span style = "color:#5AD18F">**방문 날짜 입력**</span>    |                                                                                    |
|                                                      | ✅ 숫자만 입력 해야 한다.                                                                |
|                                                      | ✅ 1 이상 31 이하의 숫자만 입력해야 한다.                                                     |
|                                                      | ✅ 1 이상 31 이하의 숫자가 아닌 경우, "[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요."라는 에러 메시지를 보여 준다. |
| <span style = "color:#5AD18F">**메뉴와 개수 입력**  </span> |                                                                                    |
|                                                      | ✅ 메뉴는 메뉴판에 있는 메뉴만 입력할 수 있다.                                                    |
|                                                      | ✅ 중복 메뉴를 입력할 수 없다.                                                             |
|                                                      | ✅ 메뉴의 개수는 1 이상의 숫자만 입력할 수 있다.                                                  |
|                                                      | ✅ 메뉴의 개수는 합해서 20개를 넘을 수 없다.                                                    |
|                                                      | ✅ 메뉴와 개수는 가운데 구분자를 통해 구분하여 입력한다.                                               |
|                                                      | ✅ 모든 예외 상황에 대해 "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지를 보여 준다.           |

| **게임 로직**                                                 | 구현 사항                                                        |
|-----------------------------------------------------------|--------------------------------------------------------------|
| <span style = "color:#5AD18F">**할인 전 총주문 금액 계산**  </span> |
|                                                           | ✅ 총주문 금액이 10000원 이상이어야 이벤트가 적용된다.                        |
| <span style = "color:#5AD18F">**증정 메뉴 계산**  </span>       |                                                              |
|                                                           | ✅ 할인 전 총주문 금액이 12만원 이상일 때, 샴페인 1개를 증정한다.                 |
| <span style = "color:#5AD18F">**혜택 내역 계산**  </span>       |                                                              |
|                                                           | ✅ 혜택 내역에 따라 혜택 금액을 따로 계산한다.                              |
| <span style = "color:#5AD18F">**총혜택 금액 계산**  </span>      |                                                              |
|                                                           | ✅ `총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격` 이다.                   |
| <span style = "color:#5AD18F"> **할인 후 예상 결제 금액 계산**       |                                                              |
|                                                           | ✅ `할인 후 예상 결제 금액 = 할인 전 총주문 금액 - 총혜택 금액 + 증정 메뉴의 가격` 이다. |
|                                                           | ✅ 변수를 생성하지 않아도 계산이 가능하므로 변수를 생성하지 않는다.                   |
| <span style = "color:#5AD18F">**이벤트 배지 계산**</span>        |                                                              |
|                                                           | ✅ 총혜택 금액에 따라 이벤트 배지의 이름을 다르게 보여 준다.                      |

| **출력**                                                     | 구현 사항                                         |
|------------------------------------------------------------|-----------------------------------------------|
| <span style = "color:#5AD18F">**주문 메뉴 출력**  </span>        |                                               |
|                                                            | ✅ 주문 메뉴마다 개행을 해서 출력한다.                    |
|                                                            | ✅ 메뉴의 이름과 개수를 출력한다.                       |
| <span style = "color:#5AD18F">**할인 전 총주문 금액 출력** </span>   |                                               |
|                                                            | ✅ 1000원 단위로 콤마를 찍어 구분한다.                  |
| <span style = "color:#5AD18F">**증정 메뉴 출력**  </span>        |                                               |
|                                                            | ✅ 증정 이벤트에 해당하지 않는 경우, 증정 메뉴 "없음"으로 보여 준다. |
|                                                            | ✅ 증정 메뉴와 개수를 모두 출력한다.                     |
| <span style = "color:#5AD18F">**혜택 내역 출력**  </span>        |                                               |
|                                                            | ✅ 적용된 이벤트가 하나도 없다면 혜택 내역 "없음"으로 보여 준다.    |
|                                                            | ✅ 혜택 내역마다 개행을 해서 출력한다.                    |
|                                                            | ✅ 혜택 금액은 '-'를 붙여 마이너스 금액으로 표시한다.          |
|                                                            | ✅ 혜택 금액은 1000원 단위로 콤마를 찍어 구분한다.           |
| <span style = "color:#5AD18F">**총혜택 금액 출력**    </span>     |                                               |
|                                                            | ✅ 1000원 단위로 콤마를 찍어 구분한다.                  |
|                                                            | ✅ 앞에 '-'를 붙여 마이너스 금액으로 표시한다.              |
| <span style = "color:#5AD18F">**할인 후 예상 결제 금액 출력** </span> |                                               |
|                                                            | ✅ 1000원 단위로 콤마를 찍어 구분한다.                  |
| <span style = "color:#5AD18F">**이벤트 배지 출력**  </span>       |                                               |
|                                                            | ✅ 이벤트 배지가 부여되지 않으면 이벤트 배지는 "없음"이다.        |

---

# 🚥 예외 상황

#### 방문 날짜

- [x] 숫자가 아닌 경우
- [x] 1 이상 31 이하의 숫자가 아닌 경우

#### 메뉴와 개수

- [x] 메뉴판에 없는 메뉴를 입력한 경우
- [x] 중복된 메뉴를 입력한 경우
- [x] 메뉴의 개수가 1 이상의 숫자가 아닌 경우
- [x] 총 메뉴의 개수가 20개를 넘는 경우
- [x] 메뉴와 개수를 구분하는 구분자가 없거나 다른 경우

---

# 🏛️ 데이터 플로우

![img_1.png](img/데이터%20플로우.png)

---

# ✅ 피드백 체크리스트

- [x] 비즈니스 로직과 UI 로직을 분리한다.
    - 비즈니스 로직은 도메인 내부에 구현하고, UI로직은 View에 구현했습니다.
    - View에는 InputView와 OutputView를 분리했습니다.
- [x] final 키워드를 사용해 값의 변경을 막는다.
    - 도메인에 생성되는 변수들은 final 키워드를 통해 변경을 막고 getter를 통해 값을 가져오도록 했습니다.
- [x] 객체의 상태 접근을 제한한다.
    - 외부 로직에 포함되는 메서드를 제외하고 도메인 내부에서만 접근할 수 있도록 접근 제한자를 사용했습니다.
- [x] 데이터를 꺼내지 않고 메시지를 던지도록 구조를 바꿔 데이터를 가지는 객체가 일하도록 한다.
    - 외부에서 변수를 가져가서 로직에 붙이지 않고 데이터를 가지는 도메인 안에서 처리하고 메시지를 던지도록 구성했습니다.
- [x] 필드의 수를 줄이기 위해 노력한다.
    - 계산 과정에서 메서드를 이용해 계산할 수 있는 값은 변수에 저장하지 않고 메서드를 통해 바로 계산하도록 했습니다.
    - 하지만 이 과정에서 재사용되는 변수를 저장할 지 아니면 메서드로 다시 계산과정을 거칠지 고민하였습니다.
    - 결과적으로는 많은 연산이 필요한 총 금액 합산 변수만 저장하고 나머지 짧은 연산은 메서드를 재사용하는 방식으로 구현했습니다.
- [x] 성공하는 케이스와 예외 케이스 모두 테스트한다.
    - 성공하는 시나리오와 실패하는 시나리오는 모두 테스트하는 방향으로 테스트코드를 작성했습니다.
- [ ] 테스트코드도 리팩토링을 통해 개선한다.
- [ ] private 함수를 테스트하려면 클래스 분리를 고려한다.

---

# 🤔 구현 과정에서의 고민

> ### 1️⃣ 이벤트 플래너의 활용도 향상
> 요구사항을 보며 12월의 크리스마스 이벤트를 진행하지만 이 이벤트 애플리케이션을 활용하여 다른 월에도 이벤트를 진행할 수 있으면 좋겠다는 생각을 했습니다.  
> 따라서 `12월에만 제한되지 않는 1년 내내 사용할 수 있는 이벤트 플래너`를 구현했습니다.
>
> Enum 클래스를 통해 이벤트 연도, 월, 일을 관리하였습니다. LocalDate 클래스를 사용하여 지정한 날짜를 기준으로 이벤트를 진행할 수 있도록 구성했습니다.
> 또한, 모든 년도의 월 일을 일일히 계산하는 것은 불가능하다고 판단하여 각 년도 월의 마지막 날이 몇일인지 계산하는 메서드를 구현했습니다.

> ### 2️⃣ Validator Static
> 3주차까지 Validator를 구현하며 싱글톤을 지키기 위해 Controller에서 Validator를 생성하여 사용했습니다.
> 그러다 보니 Controller에서 도메인을 생성할 때, 생성자에 Validator를 넣어주어야 했고 이런 상황은 코드를 복잡하고 읽기 어렵게 만들었습니다.
>
> 이를 해결하기 위해 Validator를 static으로 선언하는 방법을 생각하며 가장 큰 고민은 메모리 낭비가 아닐까 하는 것이었지만
> 고민 끝에 저는 Validator를 static으로 선언하게 되었습니다.
> 이유는 다음과 같습니다.
> 1. Validator를 Controller에서 싱글톤 방식으로 생성한다고 하더라도 컨트롤러는 애플리케이션이 시작하는 공간이기 때문에 static과 비슷한 시점에 메모리에
     올라가고 애플리케이션이 종료되어야만 메모리에서 지워진다는 것을 알게 되었습니다.
> 2. Validator를 static으로 선언함으로써 코드의 간결성이 눈에 띄게 향상할 수 있습니다.

> ### 3️⃣ 접근 제한자를 통한 객체 은닉과 디미터 법칙
> 객체지향의 핵심은 객체의 상태를 외부에서 접근하지 못하도록 은닉하는 것입니다.
> 이를 위해 `private`을 사용하여 객체의 상태를 외부에서 접근하지 못하도록 했습니다.
>
> 또한, 객체의 상태를 외부에서 접근하지 못하도록 하면서 객체의 메서드를 통해 객체의 상태를 변경하도록 했습니다.
> 이는 3주차 피드백에 있던 `데이터를 꺼내지 않고 메시지를 던지도록 구조를 바꿔 데이터를 가지는 객체가 일하도록 한다`를 구현하기 위함입니다.
>
> 이러한 구조 변경을 통해 자연스럽게 `디미터 법칙`을 지키면서 코드를 작성할 수 있었습니다. Enum에서 정의된 상수를 가져오는 메서드도 단순히 Getter를 사용해 외부로
> 전달하지 않고 Getter로 값을 전달하는 메서드를 새로 구현했습니다.  
> 이를 통해 메인 로직의 길이가 훨씬 짧아졌고 코드의 간결성 또한 향상했습니다.
